<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Online Money Marketing App</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container">
      <h1>Online Money Marketing Generator App</h1>
      <div class="input-section">
        <label for="name">Name:</label>
        <input type="text" id="name" placeholder="Enter your name" />

        <label for="id">ID:</label>
        <input type="number" id="id" placeholder="Enter id" />

        <label for="amount">Amount:</label>
        <input type="number" id="amount" placeholder="Enter amount" />

        <label for="amount">Payment Method:</label>
        <input type="text" id="payment" placeholder="Enter payment method" />

        <label for="description">Description:</label>
        <textarea id="description" placeholder="Enter description"></textarea>

        <button onclick="generatePortfolio()">Generate Data</button>
      </div>

      <div class="output-section" id="output">
        <h2>Preview:</h2>
        <div id="portfolio-preview">
          <!-- Output content will be displayed here -->
        </div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script type="text/javascript">
      function generatePortfolio() {
        const name = document.getElementById("name").value;
        const amount = document.getElementById("amount").value;
        const id = document.getElementById("id").value;
        const payment = document.getElementById("payment").value;
        const description = document.getElementById("description").value;

        // Get the current date and time
        const currentDate = new Date().toLocaleDateString();
        const currentTime = new Date().toLocaleTimeString("en-US");
        // Create portfolio content with HTML and CSS
        const portfolioContent = `
                  <link rel="stylesheet" href="css/style.css">
                  <div>
                    <p class="dateTime"><strong>Date:</strong> ${currentDate} Time:${currentTime}</p>
                    <ul class="checkbox-list">
                      <li><img src="img/check2.webp" alt="Checked"><label for="checkbox1"><span style="color:#fff; font-size:12px">Website Name Online Money Marketing</span></label></li>
                      <li><img src="img/check2.webp" alt="Checked"><label for="checkbox1"><span style="color:#fff;font-size:12px">Name: ${name}</span></label></li>
                      <li><img src="img/check2.webp" alt="Checked"><label for="checkbox1"><span style="color:#fff;font-size:12px">Id Number: ${id}</span> </label></li>
                      <li><img src="img/check2.webp" alt="Checked"><label for="checkbox1"><span style="color:#fff;font-size:12px">Support Bikash/Nagad/Rocket</span></label></li>
                    </ul>
                    <div class="card">
                      <div style="margin-bottom: 30px;">
                          <div class="onlineM" style="background: #3e79ec;display: inline;padding: 10px;border-radius: 10px;color: #fff;font-size:12px">Online Money Marketing Import Export</div>
                        </div>
                       <div class="first">
                          <div style="font-size:10px">Name : ${name}</div>
                          <div style="font-size:10px">${currentDate} ${currentTime}</div>
                        </div>
                        <div class="first" style="margin: 10px 0;">
                          <div style="font-size:10px">Amount: ${amount}</div>
                          <div style="font-size:10px">Id Number: ${id} </div>
                        </div>
                        <div class="first">
                          <div style="text-align: left;font-size:10px">Payment: ${payment}</div>
                          <div style="font-size:10px">Pay: Cash</div>
                        </div>
                       
                    </div>
                    <ul class="checkbox-list">
                      <li><img src="img/check2.webp" alt="Checked"><label for="checkbox1"><span style="color:#fff;font-size:12px">Online Money Marketing</span></label></li>
                      <li><img src="img/check2.webp" alt="Checked"><label for="checkbox1"><span style="color:#e45610;font-size:12px">${description}</span></label></li>
                      <li>
                  </div>

                `;

        // Display portfolio content
        const portfolioPreview = document.getElementById("portfolio-preview");
        portfolioPreview.innerHTML = portfolioContent;

        // Create an image from the portfolio content
        html2canvas(portfolioPreview, {
          useCORS: true,
          allowTaint: true,
          onclone: function (documentClone) {
            // Include external CSS by finding and appending all link tags
            const headClone = documentClone.head;
            const links = document.querySelectorAll('link[rel="stylesheet"]');
            links.forEach((link) => {
              const linkClone = documentClone.createElement("link");
              linkClone.rel = "stylesheet";
              linkClone.href = link.href;
              headClone.appendChild(linkClone);
            });
          },
          onrendered: function (canvas) {
            const image = canvas.toDataURL("image/png");

            // Create a link to download the image
            const downloadLink = document.createElement("a");
            downloadLink.href = image;
            downloadLink.download = "portfolio.png";
            // Check if the user is on a mobile device
            const isMobile = /iPhone|iPad|iPod|Android/i.test(
              navigator.userAgent
            );
            if (isMobile) {
              // For mobile devices, open the image in a new tab instead of triggering a download
              downloadLink.target = "_blank";
            }
            // Append the link to the document and simulate a click to trigger download or open in a new tab
            document.body.appendChild(downloadLink);
            downloadLink.click();
            // Remove the link from the document
            document.body.removeChild(downloadLink);
          },
        });
      }
    </script>
  </body>
</html>
